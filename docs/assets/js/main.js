"use strict";const searchText=document.querySelector(".searchtext"),searchBtn=document.querySelector(".searchbtn"),animeList=document.querySelector(".animelist"),favorites=document.querySelector(".favorites"),favsInLocal=document.querySelector(".favsinlocal");let allResults=[],favoriteAnimes=[],favoritesInLocal=[];function handleSearchBtn(e){e.preventDefault(),searchText.value.length>=3&&fetch("https://api.jikan.moe/v3/search/anime?q="+searchText.value).then(e=>e.json()).then(e=>{allResults=e.results,paintResults()})}function paintResults(){animeList.innerHTML="";for(let e of allResults)"https://cdn.myanimelist.net/images/qm_50.gif?s=e1ff92a46db617cb83bfc1e205aff620"===e.image_url?animeList.innerHTML+=`<li class="anime" id="${e.mal_id}"><img src="https://via.placeholder.com/210x295/567891/891234/?text=${e.type}" alt="${e.title}"><h2 class="animetitle">${e.title}</h2></li>`:animeList.innerHTML+=`<li class="anime" id="${e.mal_id}"><img src="${e.image_url}" alt="${e.title}"><h2 class="animetitle">${e.title}</h2></li>`;getFavorite()}function getFavorite(){const e=document.querySelectorAll(".anime");for(const r of e){function t(){"darkslategray"===r.style.backgroundColor?(r.style.backgroundColor="darkseagreen",r.style.border="10px solid darkseagreen",r.style.color="darkslategray"):(r.style.backgroundColor="darkslategray",r.style.border="10px solid darkslategray",r.style.color="darkseagreen")}function a(e){let t=e.currentTarget;if("darkseagreen"===r.style.backgroundColor)favoriteAnimes.push(`<li class="favorite">${t.innerHTML}<button class="deletebtn">X</button></li>`);else{const e=favoriteAnimes.indexOf(""+t.innerHTML);favoriteAnimes.splice(e,1)}favorites.innerHTML=""+favoriteAnimes,localStorage.setItem("favs",JSON.stringify(favoriteAnimes)),getDeleteBtn()}r.style.backgroundColor="darkslategray",r.style.color="darkseagreen",r.style.border="10px solid darkslategray",r.addEventListener("click",t),r.addEventListener("click",a)}}function getDeleteBtn(){const e=document.querySelectorAll(".favorite");for(let a of e){function t(){a.innerHTML=""}a.addEventListener("click",t)}}const savedFavs=JSON.parse(localStorage.getItem("favs"));favoritesInLocal=savedFavs,favsInLocal.innerHTML=favoritesInLocal,searchBtn.addEventListener("click",handleSearchBtn);